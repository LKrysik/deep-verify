# Deep Cognitive — Unknown Detector
# Version: 0.1 (PoC)
# Purpose: Actively discover "unknown unknowns"

version: "0.1"

# ═══════════════════════════════════════════════════════════════
# DETECTION PHILOSOPHY
# ═══════════════════════════════════════════════════════════════
#
# "I don't know what I don't know" — this is the hardest problem.
#
# This detector runs:
# 1. After each cognitive operation
# 2. At phase transitions
# 3. When explicitly triggered
#
# It checks for GAPS in what has been considered.

# ═══════════════════════════════════════════════════════════════
# PHASE-SPECIFIC CHECKS
# ═══════════════════════════════════════════════════════════════

phase_checks:
  idea:
    - name: "User validation"
      check: "Has target user been validated with real data?"
      on_gap:
        unknown_type: user
        priority: high
        description: "Target user assumptions not validated"
        suggested_action: "Interview 3 potential users"

    - name: "Problem validation"
      check: "Is the problem based on assumption or evidence?"
      on_gap:
        unknown_type: market
        priority: high
        description: "Problem existence not validated"
        suggested_action: "Find evidence of problem in forums, support tickets, etc."

    - name: "Competition awareness"
      check: "Have alternatives/competitors been researched?"
      on_gap:
        unknown_type: market
        priority: medium
        description: "Competitive landscape unknown"
        suggested_action: "Research existing solutions"

  specification:
    - name: "NFR coverage"
      check: "Are all NFR categories addressed?"
      categories:
        - performance
        - security
        - scalability
        - reliability
        - usability
        - accessibility
        - maintainability
      on_gap:
        unknown_type: technical
        priority: medium
        description: "NFR category '{category}' not addressed"
        suggested_action: "Define requirements for {category}"

    - name: "Edge cases"
      check: "Are error/edge cases considered for each feature?"
      on_gap:
        unknown_type: technical
        priority: medium
        description: "Edge cases not documented"
        suggested_action: "For each feature, list: what if X fails?"

    - name: "User workflow completeness"
      check: "Are all user workflows end-to-end?"
      on_gap:
        unknown_type: user
        priority: high
        description: "User workflows may be incomplete"
        suggested_action: "Walk through each user story start to finish"

  architecture:
    - name: "External dependencies"
      check: "Are all external dependencies identified?"
      sources:
        - APIs
        - Libraries
        - Services
        - Data sources
        - Auth providers
      on_gap:
        unknown_type: technical
        priority: high
        description: "External dependency may be missing"
        suggested_action: "List all external systems the app will interact with"

    - name: "Failure modes"
      check: "What happens when each component fails?"
      on_gap:
        unknown_type: technical
        priority: medium
        description: "Failure modes not considered"
        suggested_action: "For each component: what if it's unavailable?"

    - name: "Data migration"
      check: "If there's existing data, how will it be migrated?"
      on_gap:
        unknown_type: technical
        priority: medium
        description: "Data migration strategy unknown"
        suggested_action: "Define migration plan if applicable"

    - name: "Deployment strategy"
      check: "How will the system be deployed?"
      on_gap:
        unknown_type: technical
        priority: medium
        description: "Deployment strategy not defined"
        suggested_action: "Define deployment approach"

  implementation:
    - name: "Test strategy"
      check: "Is there a clear testing approach?"
      on_gap:
        unknown_type: technical
        priority: high
        description: "Testing strategy unclear"
        suggested_action: "Define unit, integration, e2e test approach"

    - name: "Environment parity"
      check: "Are dev/staging/prod environments defined?"
      on_gap:
        unknown_type: technical
        priority: medium
        description: "Environment strategy unclear"
        suggested_action: "Define environment setup"

  testing:
    - name: "Coverage gaps"
      check: "Are there untested critical paths?"
      on_gap:
        unknown_type: technical
        priority: high
        description: "Critical paths may be untested"
        suggested_action: "Review test coverage for critical flows"

# ═══════════════════════════════════════════════════════════════
# COMMON FORGOTTEN ITEMS
# ═══════════════════════════════════════════════════════════════
# Things users commonly forget to mention

common_forgotten:
  - item: "Authentication/Authorization"
    ask_if_not_mentioned: true
    question: "How will users authenticate?"
    phases: [specification, architecture]

  - item: "Error handling"
    ask_if_not_mentioned: true
    question: "How should errors be displayed to users?"
    phases: [specification]

  - item: "Logging/Monitoring"
    ask_if_not_mentioned: true
    question: "Do you need logging or monitoring?"
    phases: [architecture]

  - item: "Backup/Recovery"
    ask_if_not_mentioned: true
    question: "What if data is lost? Backup strategy?"
    phases: [architecture]

  - item: "Email/Notifications"
    ask_if_not_mentioned: true
    question: "Does the system need to send emails or notifications?"
    phases: [specification]

  - item: "Rate limiting"
    ask_if_not_mentioned: true
    question: "Should the API have rate limits?"
    phases: [architecture]

  - item: "Internationalization"
    ask_if_not_mentioned: false
    question: "Will the app need to support multiple languages?"
    phases: [specification]

  - item: "Offline support"
    ask_if_not_mentioned: false
    question: "Should the app work offline?"
    phases: [specification, architecture]

  - item: "Data retention"
    ask_if_not_mentioned: false
    question: "How long should data be kept? GDPR?"
    phases: [specification, architecture]

# ═══════════════════════════════════════════════════════════════
# ASSUMPTION DETECTION
# ═══════════════════════════════════════════════════════════════
# Identify implicit assumptions

assumption_patterns:
  - pattern: "users will..."
    flag: "User behavior assumption"
    suggest: "How do you know users will do this?"

  - pattern: "obviously"
    flag: "Unstated assumption"
    suggest: "What makes this obvious? Is it documented?"

  - pattern: "simple"
    flag: "Complexity assumption"
    suggest: "Simple for whom? What makes it simple?"

  - pattern: "just..."
    flag: "Effort minimization"
    suggest: "Is this really 'just'? What's involved?"

  - pattern: "everyone knows"
    flag: "Knowledge assumption"
    suggest: "Who specifically knows this? Is it documented?"

  - pattern: "later"
    flag: "Deferred decision"
    suggest: "When is 'later'? What's the impact of delay?"

# ═══════════════════════════════════════════════════════════════
# OUTPUT FORMAT
# ═══════════════════════════════════════════════════════════════

output_format:
  unknown:
    id: "UNK-{sequence}"
    type: "technical | user | market | feasibility"
    description: "Clear description of what is unknown"
    discovered_at: "{timestamp}"
    discovered_via: "{operation_name}"
    discovered_during: "{phase}"
    priority: "high | medium | low"
    impact: "What could go wrong if this remains unknown"
    suggested_action: "How to resolve this unknown"
    status: "discovered | exploring | addressed | accepted_risk"
