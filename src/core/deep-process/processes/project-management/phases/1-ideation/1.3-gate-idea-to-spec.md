---
id: gate-idea-to-spec
type: gate
name: "Gate: Ideation to Specification"
inputs:
  - artifacts/idea.md
  - .state/unknowns.yaml
  - .state/phase.yaml
outputs:
  - .state/phase.yaml
next:
  success: phase:specification
  failure: capture-idea
---

# Gate: Idea to Spec

## Purpose
Verify that the idea is sufficiently crystallized and safe to proceed to detailed specification.

## Algorithm (Audit Procedure)

1.  **READ:** Read `artifacts/idea.md` and `.state/unknowns.yaml`.
2.  **SCORE:** Evaluate based on these criteria:
    *   **Problem Clarity (25%):** One sentence? Pain point clear?
    *   **User Definition (20%):** Specific persona?
    *   **Success Criteria (20%):** At least 2 measurable goals?
    *   **Scope Boundaries (20%):** IN and OUT lists present?
    *   **Risk Awareness (15%):** Are high-priority unknowns identified?
3.  **CALCULATE:** weighted_score = sum(score * weight).
4.  **UPDATE STATE:**
    *   Open `.state/phase.yaml`.
    *   If `weighted_score >= 0.7`:
        *   Set `current_phase: specification`.
        *   Set `phase_progress: 0.0`.
        *   Add gate result to `phases_history`.
    *   Else:
        *   Stay in `ideation`.
        *   Add `BLK-GATE-001` to `blocking_items` with details on gaps.
    *   Append entry to `.state/history.yaml`.

## Output Format
Provide a summary of the audit and the resulting state change.

```markdown
### Gate Audit Results
- Score: {weighted_score}
- Result: {PASSED|FAILED}
- Gaps: {List if any}
```

## Validation Rules
- [ ] Logic for weighted average is correct.
- [ ] If failed, a blocker is added to `phase.yaml`.
- [ ] If passed, `current_phase` is changed to `specification`.
