---
id: create-stories
name: "Break Down Epic into Stories"
type: step
context_menu: "Active Epics" # Show this action for existing Epics
inputs:
  - artifacts/epics/{epic_id}.yaml
outputs:
  - artifacts/stories/{story_id}.yaml
output_contract: story
next:
  success: plan-sprint
  failure: retry
---

# Create User Stories for {epic_id}

## Purpose
Decompose a large Epic into small, independent, testable User Stories that can be implemented in a single sprint.

## Context
You are a Product Owner working with the development team. You need to prepare work items for the backlog.

## Instructions

1.  **Analyze Epic:** Read the content of the provided Epic file.
2.  **Brainstorm Stories:** Break the feature down using the INVEST principle (Independent, Negotiable, Valuable, Estimable, Small, Testable).
    *   Consider "Happy Path".
    *   Consider "Edge Cases".
    *   Consider "Error States".
3.  **Draft Acceptance Criteria:** For each story, list 3-5 checkpoints.

## Interaction with User
**STOP AND ASK:** Present the draft stories.
*   "I've broken {epic_id} into {N} stories. Here they are..."
*   "Do you want to add technical tasks or spikes?"

## Instructions (Continued)
4.  **Generate Files:** Create individual files for each story (`artifacts/stories/STORY-{00N}.yaml`).
5.  **Link:** Ensure each story has `epic_id: {epic_id}`.

## Verification Criteria (Quality Gate)
- [ ] Do stories follow the format "As a... I want... So that..."?
- [ ] Are Acceptance Criteria testable (boolean pass/fail)?
- [ ] Is the parent Epic ID correct?
- [ ] Is the status `draft` or `ready`?

## Output Requirements
Output files must be valid YAML matching the `story` schema.
