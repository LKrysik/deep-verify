---
id: validate-requirements
name: "Check for conflicts and completeness"
inputs:
  - artifacts/idea.md
  - artifacts/prd.md
  - .state/unknowns.yaml
outputs:
  - .state/unknowns.yaml
next:
  success: gate-spec-to-arch
  failure: retry
---

# Validate Requirements

## Purpose
Ensure that the Product Requirements Document (PRD) is complete, consistent, and fully addresses the initial idea.

## Algorithm (Audit Procedure)

1.  **READ:** Load `idea.md` (Idea) and `prd.md` (Requirements).
2.  **TRACEABILITY CHECK:**
    *   Does every "Success Criteria" in `idea.md` map to at least one Functional Requirement in `prd.md`?
3.  **CONSISTENCY CHECK:**
    *   Are there any conflicting requirements? (e.g., "Must be extremely fast" vs "Must run on low-power hardware" without trade-off analysis).
4.  **RISK SCAN:**
    *   Do any requirements introduce new risks?
5.  **UPDATE STATE:**
    *   If new risks found: Update `.state/unknowns.yaml`.
    *   Update `.state/phase.yaml` -> `phase_progress: 1.0`.
    *   Append entry to `.state/history.yaml`.

## Output Format (Log)
Report the validation result directly to the user (via text output) and update state files.

## Validation Rules
- [ ] All Success Criteria are covered.
- [ ] No direct conflicts between MUST requirements.
- [ ] State progress updated to 1.0.
