---
id: create-prd
name: "Create Product Requirements Document"
inputs:
  - artifacts/idea.md
outputs:
  - artifacts/prd.md
next:
  success: validate-requirements
  failure: retry
---

# Create PRD

## Purpose
Translate the crystallized idea into a complete set of functional and non-functional requirements.

## Algorithm (Step-by-Step)

1.  **READ:** Read `artifacts/idea.md` to understand the goal and scope.
2.  **DEFINE FUNCTIONAL REQUIREMENTS:** List specific features (FR-XXX) required to achieve the Success Criteria.
3.  **DEFINE NON-FUNCTIONAL REQUIREMENTS:** Address Performance, Security, and Scalability (NFR-XXX).
4.  **PRIORITIZE:** Use MoSCoW (Must, Should, Could, Won't) for each requirement.
5.  **CREATE ARTIFACT:** Write the content to `artifacts/prd.md`.
6.  **UPDATE STATE:**
    *   Open `.state/phase.yaml`.
    *   Update `phase_progress` to `0.5`.
    *   Add `artifacts/prd.md` to `current_artifacts`.
    *   Update `last_action` with `name: create-prd`.
    *   Append an entry to `.state/history.yaml`.

## Output Schema (artifacts/prd.md)

```markdown
# Product Requirements: {Project Name}

## Functional Requirements
- **[FR-001]** {Title} - {Description} ({Priority})
- **[FR-002]** {Title} - {Description} ({Priority})

## Non-Functional Requirements
- **[NFR-001]** {Title} - {Description} ({Priority})

## Prioritization Matrix (MoSCoW)
- **MUST:** ...
- **SHOULD:** ...
```

## Validation Rules
- [ ] At least 5 Functional Requirements are defined.
- [ ] At least 2 Non-Functional Requirements are defined.
- [ ] Every requirement has a unique ID and a MoSCoW priority.
